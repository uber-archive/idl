#!/usr/bin/env bash

echo "Cloning into 'foobar'..."
echo "This server is protected by Duo two-factor login."
echo ""
echo "Authenticated with partial success."
echo "Duo two-factor login for foo@bar"
echo ""
echo "Enter a passcode or select one of the following options:"
echo ""
echo " 1. Duo Push to XXX-XXX-5555"
echo " 2. Phone call to XXX-XXX-5555"
echo " 3. SMS passcodes to XXX-XXX-5555"
echo ""

while true; do
    read -p "Passcode or option (1-3):" option

    case $option in
        [1]* ) sleep 2; break;;
        [2]* ) sleep 2; break;;
        [3]* ) sleep 2; break;;
        * ) echo "Please pick an option (1-3).";;
    esac
done

GIT_COMMAND=$(which -a git | awk 'NR==2 {print}')

$GIT_COMMAND "$@"
